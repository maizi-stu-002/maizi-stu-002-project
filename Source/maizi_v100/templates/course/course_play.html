{% extends "base.html" %}
{% load staticfiles %}
{% block head %}
<style>
  .ewm{
    position: absolute;
    left: 40px;
    top:100px;
    background: #fff;
    box-shadow: 1px 1px 10px #888888;
    opacity: 0;
    -webkit-transition:opacity .3s;
    z-index:100;
    pointer-events:none;
  }
  .ewm p{
    font-size: 16px;
  }
  .downloadv:hover .ewm{
    opacity: 1;
  }
  .mc-interact-share{
    pointer-events:none;
    opacity: 1;
  }
  .v5-icon-sina,.v5-icon-qqzone,.v5-icon-weixin{
  
    pointer-events:auto;
  }

  .v5-icon-sina:hover,.v5-icon-qqzone:hover,.v5-icon-weixin:hover{
    opacity: .8;
  }
  #video-player .vjs-big-play-button{
    display: none;
  }

</style>
<link rel="stylesheet" href={% static "js/video-js/video-js.css" %}>
<link rel="stylesheet" href={% static "js/jquery.fileupload.css" %}>
<script src={% static "js/video-js/video.js" %}></script>
{% endblock head %}
{% block content %}
  <div class="container">
    <ol class="breadcrumb">
      <li><a href={% url 'index' %}>首页</a></li>
      <li><a href={% url 'course_list' %}>职业课程</a></li>
      <li><a href={% url 'course_stage' course.stage.career_course.symbol %}>{{ course.stage.career_course.name }}</a></li>
      <li class="active">{{ course.name }}</li>
    </ol>
  </div>
  <div class="container">
    <div class="course-play">
      <dl class="course-lead">
        <dt>{{ course.name }}</dt>
        <dd>{{ course.description }}</dd>
      </dl>
      
      <div class="course-play-container">
        <div class="row popover-test-container">
          <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 course-play-box" style="background-color: #000">
           <video id="video-player" class="video-js vjs-default-skin" controls preload="none" 
            width="100%" height="100%" autoplay data-setup='{"playbackRates":[1, 1.25, 1.5, 2]}'>
               <source src="{{ lesson_to_play.video_url }}" type='video/mp4' />
             </video>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 course-play-list">
            <h1>课程章节</h1>
            <div id="playlist" class="playlist scroll-pane">
              <ul>
              {% with course.stage.career_course.symbol as symbol %}
                  
              {% for lesson in course.lesson_set.all %}
                
                {% ifequal lesson lesson_to_play  %} 
                <li class="active_null"><a
                  href="{% url 'course_play' symbol course.id lesson.id %}"
                  style="background-color:#2D3E50;color:#1BBC9B;"
                  courseId="{{ course.id }}"
                  lessonId="{{ lesson.id }}"
                  class="active"
                >
                {% else %}
                <li><a href="{% url 'course_play' symbol course.id lesson.id %}"
                  courseId="{{ course.id }}"
                  lessonId="{{ lesson.id }}">
                {% endifequal %}
                {{ lesson.name }}</a>
                {% if not is_user and forloop.counter > 2 %}
                <i class="v5-icon v5-icon-lock"></i>
                  
                {% endif %}
                </li>
              {% endfor %}
              {% endwith %}
              </ul>
            </div>
          </div>
        </div>
        <div class="row mc-interact">
          <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">
            <div class="mc-interact-save">

             
              <a href={{ deadlink }} class="house">
                {% if  housed %}
                <i class="v5-icon v5-icon-save v5-icon-saved"></i>
                <span>已收藏</span>
                  
                {% else %}
                <i class="v5-icon v5-icon-save"></i>
                <span>收藏</span>
                  
                {% endif %}
              </a>
              <a href={{ deadlink }} class="downloadv">
                <i class="v5-icon v5-icon-download"></i>
                <span>下载</span>
                <!--二维码-->
                <div class="ewm">
                  <p>APP可离线下载该课程</p>
                  <div id="code"></div> 
                  <p>扫描二维码下载APP</p>
                </div>
              </a>
            </div>
            <div class="mc-interact-share">
              <dl>
                <dt class="cf">
                  <a href="{{ deadlink }}" class="v5-icon v5-icon-sina"></a>
                  <a href="{{ deadlink }}" class="v5-icon v5-icon-qqzone"></a>
                  <a href="{{ deadlink }}" class="v5-icon v5-icon-weixin"></a>
                </dt>
                <dd>分享给朋友</dd>
              </dl>
            </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7">
            <p>{% ifequal studentCount 0 %}
              孤军作战中。。。
              {% else %}
            已有{{ studentCount }}位同学与你并肩作战
            {% endifequal %}
            </p>
          </div>
        </div>
        <div class="row course-play-info">
          <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 aside-l">
          	<ul class="course-play-tabs" role="tablist">
              <li class="active"><a href="#comm" role="tab" data-toggle="tab">学习交流</a></li>
              <li><a href="#exercise" role="tab" data-toggle="tab">在线练习</a></li>
              {% if is_user %}
                
              <li ><a href="#submit" role="tab" data-toggle="tab">作业提交</a></li>
              {% endif %}
              <li><a href="#download" role="tab" data-toggle="tab">课件下载</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="comm">
                <div class="media">
                  <a class="pull-left" href="#">
                    <img class="media-object" 
                    {% if user.avatar_url %}
                    src="/uploads/{{ user.avatar_url }}"
                      
                    {% else %}
                    src='{% static "images/default_small.png" %}'
                    {% endif %}>
                  </a>
                  <div class="media-body">
                    <h4 class="media-heading">
                      {% if is_user %}
                      <span class="user-name">
                        {% if user.username %}
                        {{ user.username}}
                        {% elif user.email %}
                        {{ user.email }}
                        {% endif %}
                      </span>
                        {% if is_teacher %}
                        <span class="grade">老师</span>
                        {% endif %}
                      {% else %}
                      <span class="user-name">
                        尚未登陆
                      </span>
                      {% endif %}
         
                    </h4>
                    <div class="comment-input">
                      <textarea class="form-control" rows="3" placeholder="我要评论"
                      {% if not is_user %}disabled{% endif %}></textarea>
                      {% if not is_user %}
                        <div class="not-logged">
                          <p>请先<a href="#" data-toggle="modal" data-target="#loginModal">登录</a>或<a href="" data-toggle="modal" data-target="#registerModal">注册</a></p>
                        </div>
                      {% endif %}
                      <div class="btnbox">
                        <button type="button" 
                        {% if not is_user %}
                        class="btn btn-micv5 btn-lg-fts btn-micv5-disabled" disabled
                        {% else %}
                        class="btn btn-micv5 btn-lg-fts"
                        {% endif %}
                        >发布评论</button>
                      </div>
                    </div>
                  </div>
                </div>
                <!--父级评论开始-->
                <ul class="media-list">
                  {% include "course_comment.html" %}
                </ul>
                <!-- 父级评论结束 -->


              </div>
              <div class="tab-pane" id="exercise">
              	<div class="row exercise-table">
                  <div class="col-sm-4">
                   <div class="knowledge-point">
                     <h1>知识点</h1>
                     <p>echo是PHP中的输出语句，可以把字符串输出（字符串用双引号括起来）。</p>
                     <p>如下代码：</p>
                     <p>&lt;?php echo "Hello world!";?&gt;注意echo关键字与字符串之间至少要有一个空格。如下面写法是不正确的：</p>
                     <p>&lt;?php echo"Hello world!";?&gt;</p>
                   </div> 
                   <div class="task">
                     <h1>任务</h1>
                     <p>echo是PHP中的输出语句，可以把字符串输出（字符串用双引号括起来）。</p>
                     <p>如下代码：</p>
                     <p>&lt;?php echo "Hello world!";?&gt;注意echo关键字与字符串之间至少要有一个空格。如下面写法是不正确的：</p>
                     <p>&lt;?php echo"Hello world!";?&gt;</p>
                   </div>
                  </div>
                  <div class="col-sm-8 v5-code">
                    <div class="code-wp">
                      <div class="code-box scroll-pane">
                        <pre>
<code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;title&gt;Echo语句&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt; 
&lt;p&gt;
 
&lt;/p&gt;
</code>
                        </pre>                     
                      </div>
                      <div class="runcode"><button class="btn btn-micv5 btn-lg-fts">提交</button></div>
                    </div>
                    <div class="run-results">
                      <h1>运行结果</h1>
                      <div class="results scroll-pane">
                        <pre>
<code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;title&gt;Echo语句&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt; 
</code>
                        </pre>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% if is_user %}
                
              <div class="tab-pane" id="submit">
                <p align="center">这是默认的课后作业，赶快把老师课堂讲的代码做一遍提交上来吧</p>
                <br>
               
                <!--开始上传-->
                <div class="btn-box job-sub">
                  <span class="btn btn-micv5 btn-v5-lg sub-work fileinput-button">
                      <span>
                      {% if upload_file_exists %}
                        
                      重新上传
                      {% else %}
                      选择作业
                      {% endif %}
                      </span>
                      {{ uploadFileForm.FileData }}
                  </span>
                  
                </div>
                <div class="progress work-pro" id="progress" style="display:none;margin:20px 0;">
                        <div class="progress-bar progress-bar-success" style="background-color:#1BBC9B"></div>
                </div>
                <div class="success-tips"><span>上传此章作业（ZIP、RAR）</span></div>
                <div class="tips-error bg-danger text-danger" style="display:none;">错误提示</div>
                <div class="success-tips success-msg" style="display: none;">
                        <i class="v5-icon v5-icon-success"></i>
                        <span>此章节的作业已上传成功，继续努力！</span>
                </div>
               
              </div>
              {% endif %}
              <div class="tab-pane" id="download">
              	<table class="table">
                  <tbody>
                  {% for lr in lessonResource %}
                    
                    <tr>
                      <td width="9%"><img src={% static "images/doc/rar.png" %}></td>
                      <td width="36%">{{ lr.name }}</td>
                      <td width="55%" class="text-align-r"><a href="{{ lr.resource.url }}" class="btn btn-micv5"><i class="v5-icon v5-icon-downloadsm"></i>下载</a></td>
                    </tr>
                  {% endfor %}
                 
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 aside-r">
            <div class="v5-box">
              <h1>讲师介绍</h1>
              <div class="media teacher">
                <a class="pull-left" href="#">
                  <img src={{ course.teacher.user.avatar_url.url}}>
                </a>
                <div class="media-body">
                  <h4 class="media-heading">{{ course.teacher.user.username }}</h4>
                  <p>{{ course.teacher.position }}</p>
                  <a href="" class="btn btn-micv5">查看他的课程</a>
                </div>
              </div>
              <article>
              	{{ course.teacher.description }}
              </article>
            </div>
            <div class="v5-box">
              <h1>相关文章</h1>
              <div class="media relevant">
                <a class="pull-left" href="#">
                  <img src={% static "test/13.jpg" %}>
                </a>
                <div class="media-body">
                  <h4 class="media-heading"><a href="">开发者的对象技术开发者的</a></h4>
                  <p>21小时前发布 副本</p>
                </div>
              </div>
              <div class="media relevant">
                <a class="pull-left" href="#">
                  <img src={% static "test/13.jpg" %}>
                </a>
                <div class="media-body">
                  <h4 class="media-heading"><a href="">开发者的对象技术开发者的</a></h4>
                  <p>21小时前发布 副本</p>
                </div>
              </div>
              <div class="media relevant">
                <a class="pull-left" href="#">
                  <img src={% static "test/13.jpg" %}>
                </a>
                <div class="media-body">
                  <h4 class="media-heading"><a href="">开发者的对象技术开发者的</a></h4>
                  <p>21小时前发布 副本</p>
                </div>
              </div>
              <div class="media relevant">
                <a class="pull-left" href="#">
                  <img src={% static "test/13.jpg" %}>
                </a>
                <div class="media-body">
                  <h4 class="media-heading"><a href="">开发者的对象技术开发者的</a></h4>
                  <p>21小时前发布 副本</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--在线测试-->
  <div class="modal fade" id="onlinetestModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true"> 
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body">
          <div class="box-onlinetest">
            <article>
              <div class="onlinetest-wp cf">
                <section>
                  <h1 class="ft20 text-center">在线测试</h1>
                  <p>有以下程序段: int s=0,a=1,n; scanf("%d",&n);do {  s+=1;a=a-2; }  while(a!=n);printf("%d\n",s);若要使程序的输出值为2，则应该从键盘给n输入的值是(      )</p>
                  <button>A：1</button>
                  <button>B：2</button>
                  <button>C：3</button>
                  <button>D：4</button>
                  <span>1/5</span>
                </section>
                <section>
                  <h1 class="ft20 text-center">在线测试</h1>
                  <p>有以下程序段: int s=0,a=1,n; scanf("%d",&n);do {  s+=1;a=a-2; }  while(a!=n);printf("%d\n",s);若要使程序的输出值为2，则应该从键盘给n输入的值是(      )</p>
                  <button>A：1</button>
                  <button>B：2</button>
                  <button>C：3</button>
                  <button>D：4</button>
                  <span>2/5</span>
                </section>
                <section>
                  <h1 class="ft20 text-center">在线测试</h1>
                  <p>有以下程序段: int s=0,a=1,n; scanf("%d",&n);do {  s+=1;a=a-2; }  while(a!=n);printf("%d\n",s);若要使程序的输出值为2，则应该从键盘给n输入的值是(      )</p>
                  <button>A：1</button>
                  <button>B：2</button>
                  <button>C：3</button>
                  <button>D：4</button>
                  <span>3/5</span>
                </section>
                <section>
                  <h1 class="ft20 text-center">在线测试</h1>
                  <p>有以下程序段: int s=0,a=1,n; scanf("%d",&n);do {  s+=1;a=a-2; }  while(a!=n);printf("%d\n",s);若要使程序的输出值为2，则应该从键盘给n输入的值是(      )</p>
                  <button>A：1</button>
                  <button>B：2</button>
                  <button>C：3</button>
                  <button>D：4</button>
                  <span>4/5</span>
                </section>
                <section>
                  <h1 class="ft20 text-center">在线测试</h1>
                  <p>有以下程序段: int s=0,a=1,n; scanf("%d",&n);do {  s+=1;a=a-2; }  while(a!=n);printf("%d\n",s);若要使程序的输出值为2，则应该从键盘给n输入的值是(      )</p>
                  <button>A：1</button>
                  <button>B：2</button>
                  <button>C：3</button>
                  <button>D：4</button>
                  <span>5/5</span>
                </section>
                <section>
                  <h1 class="ft20 text-center">测试结果</h1>
                  <ul class="row">
                    <li class="col-sm-6">答对题数：</li>
                    <li class="col-sm-6 text-center text-v5"><h2>3</h2></li>
                  </ul>
                  <ul class="row">
                    <li class="col-sm-6">答错题数：</li>
                    <li class="col-sm-6 text-center text-red"><h2>2</h2></li>
                  </ul>
                  <ul class="row">
                    <li class="col-sm-6">正确率：</li>
                    <li class="col-sm-6 text-center text-v5"><h2>60%</h2></li>
                  </ul>
                  <ul class="row">
                    <li class="col-sm-6">获得学力：</li>
                    <li class="col-sm-6 text-center text-v5"><h2>1</h2></li>
                  </ul>
                  <input type="button" class="btn btn-micv5 btn-v5-md btn-block closetest" value="结束测试" />
                </section>
              </div>             
            </article>
          </div>        
        </div>
      </div>
    </div>
  </div>

  <!--在线测试提示-->
  <div class="popover-test hidden" id="popover_test">
    <span>本章节即将播放结束，赶快自测 一下知识点吧。答对挣学分哦~</span>
    <a href="" class="start-test">开始测试</a>
  </div>
{% endblock content %}
{% block accessory %}
<script src={% static "js/jquery.cookie.js" %}></script>
<script src={% static "js/jquery.ui.widget.js" %}></script>
<script src={% static "js/jquery.iframe-transport.js" %}></script>
<script src={% static "js/jquery.fileupload.js" %}></script>
<script src={% static "js/jquery.fileupload-process.js" %}></script>
<script src={% static "js/jquery.fileupload-validate.js" %}></script>
<script src={% static "js/jquery.qrcode.js" %}></script>
<script src={% static "js/qrcode.js" %}></script>
<script src={% static "js/csrf.js" %}></script>
<script src={% static "js/course_play.js" %}></script>
{% endblock accessory %}